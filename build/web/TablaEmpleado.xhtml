<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
 xmlns:h="http://xmlns.jcp.org/jsf/html"
 xmlns:f="http://xmlns.jcp.org/jsf/core"
 xmlns:c="http://java.sun.com/jsp/jstl/core"
 xmlns:p="http://primefaces.org/ui">
 <h:head>
 <title>Registro de Empleados</title>
 <h:outputStylesheet name="css/bootstrap.min.css" />
 <h:outputStylesheet name="css/alertify.core.css" />
 <h:outputStylesheet name="css/alertify.default.css" />
 <h:outputScript name="js/alertify.js"/>
 </h:head>
 <h:body>
 <div class="container">
 <div class="row">
 <div class="col-md-12">
 <h2>Registro de Empleados</h2>
 <h:form id="miFormulario">
 <h:panelGroup layout="block" styleClass="alert alert-danger"
 rendered="#{not empty facesContext.messageList}">
 <h:messages />
 </h:panelGroup>
 <h:panelGrid columns="4" styleClass="table">
 <h:outputLabel for="Id" value="Id:"/>
 <h:inputText id="id" styleClass="form-control"
               value="#{empleadoBean.empleado.id}"
required="true"
requiredMessage="Debes ingresar el id"
validatorMessage="Id no valido">
 <f:validateRegex pattern="[A-Z]{2}[0-9]{4}"/>
 </h:inputText>
 <h:outputLabel for="Nombre" value="Nombre:"/>
 <h:inputText id="nombre" styleClass="form-control"
  value="#{empleadoBean.empleado.nombres}"
 required="true"
requiredMessage="Debes ingresar el nombre"/>
 <h:outputLabel for="Apellido" value="Apellidos:"/>
 <h:inputText id="apellidos" styleClass="form-control"
  value="#{empleadoBean.empleado.apellidos}"
 required="true"
requiredMessage="Debes ingresar los apellidos"/>
 <h:outputLabel for="Fecha" value="Fecha de nacimiento:"/>
 <h:inputText id="Fechadenacimiento" value="#{empleadoBean.empleado.fechaNacimiento}"
 required="true" styleClass="form-control"
requiredMessage="Debes ingresar la fecha de nacimiento">
 <f:validateRegex pattern="[0-9]{8}"/>
 </h:inputText>
  <h:outputLabel for="Telefono" value="Telefono:"/>
 <h:inputText id="Telefono" value="#{empleadoBean.empleado.telefonoFijo}"
 required="true" styleClass="form-control"
requiredMessage="Debes ingresar un numero telefonico">
 <f:validateRegex pattern="[0-9]{8}"/>
 </h:inputText>
  <h:outputLabel for="Genero" value="Genero:"/>
  <h:inputText id="Genero" value="#{empleadoBean.empleado.genero}"
 required="true" styleClass="form-control"
requiredMessage="Debes ingresar un genero">
<f:validateRegex pattern="[A-Z]{10}"/>
 </h:inputText>
    <h:outputLabel for="Dui" value="Dui:"/>
    <h:inputText id="Dui" value="#{empleadoBean.empleado.dui}"
 required="true" styleClass="form-control"
requiredMessage="Debes ingresar tu Dui">
 <f:validateRegex pattern="[0-9]{10}"/>
 </h:inputText>
    <h:outputLabel for="Cargo" value="Cargo:"/>
    <h:inputText id="Cargo" value="#{empleadoBean.empleado.cargo}"
 required="true" styleClass="form-control"
requiredMessage="Debes ingresar tu cargo">
 <f:validateRegex pattern="[A-Z]{100}"/>
 </h:inputText>

  <h:outputLabel for="idArea" value="Id Area:"/>
  <p:selectOneMenu id="options"  value="#{empleadoBean.empleado}">
      <f:selectItems value="#{empleadoBean.listarArea}" var="list"  itemLabel="#{list.id}"/> 
   </p:selectOneMenu>

     <h:outputLabel for="Correo" value="Correo:"/>
     <h:inputText id="Correo" value="#{empleadoBean.empleado.correo}"
 required="true" styleClass="form-control"
requiredMessage="Debes ingresar tu correo">
 </h:inputText>
     <h:outputLabel for="Contra" value="Contraseña:"/>
     <h:inputText id="Contra" value="#{empleadoBean.empleado.contra}"
 required="true" styleClass="form-control"
requiredMessage="Debes ingresar tu Contraseña">
 </h:inputText>
     
      <h:outputLabel for="idRecursos" value="Id Recursos:"/>
  <p:selectOneMenu id="opciones"  value="#{empleadoBean.empleado}">
      <f:selectItems value="#{empleadoBean.listarRecurso}" var="listar"  itemLabel="#{listar.id}"/> 
   </p:selectOneMenu>
     
 </h:panelGrid>
 <h:commandButton value="Guardar" styleClass="btn btn-success"
   action="#{empleadoBean.guardarEmpleado()}" style="margin-right:10px"/>
 <h:commandButton type="reset" value="Limpiar" styleClass="btn btn-danger"/>
 </h:form>
 </div>
 </div>
 <div class="row">
 <h:form>
     <h:dataTable styleClass="table" value="#{empleadoBean.listaEmpleado}"
                  var="empleado"  rendered="#{empleadoBean.listaEmpleado.size()>0}">
 <h:column>
 <f:facet name="header">
 <h:outputLabel value="Id"/>
 </f:facet>
     <h:outputText value="#{empleado.id}"/>
 </h:column>
 <h:column>
 <f:facet name="header">
 <h:outputLabel value="Nombre"/>
 </f:facet>
     <h:outputText value="#{empleado.nombres}"/>
 </h:column>
          <h:column>
 <f:facet name="header">
 <h:outputLabel value="Apellidos"/>
 </f:facet>
  <h:outputText value="#{empleado.apellidos}"/>
 </h:column>
  <h:column>
 <f:facet name="header">
 <h:outputLabel value="Fecha de Nacimiento"/>
 </f:facet>
 <h:outputText value="#{empleado.fechaNacimiento}"/>
 </h:column>
          <h:column>
 <f:facet name="header">
 <h:outputLabel value="Telefono"/>
 </f:facet>
  <h:outputText value="#{empleado.telefonoFijo}"/>
 </h:column>
  <h:column>
 <f:facet name="header">
 <h:outputLabel value="Genero"/>
 </f:facet>
  <h:outputText value="#{empleado.genero}"/>
 </h:column>
          <h:column>
 <f:facet name="header">
 <h:outputLabel value="Dui"/>
 </f:facet>
 <h:outputText value="#{empleado.dui}"/>
 </h:column>
          <h:column>
 <f:facet name="header">
 <h:outputLabel value="Cargo"/>
 </f:facet>
   <h:outputText value="#{empleado.cargo}"/>
 </h:column>
          <h:column>
 <f:facet name="header">
 <h:outputLabel value="IdAreaAsignado"/>
 </f:facet>
              <h:outputText value="#{empleado.idAreaAsignada.id}"/>
 </h:column>
          <h:column>
 <f:facet name="header">
 <h:outputLabel value="Correo"/>
 </f:facet>
              <h:outputText value="#{empleado.correo}"/>
 </h:column>
          <h:column>
 <f:facet name="header">
 <h:outputLabel value="Contra"/>
 </f:facet>
              <h:outputText value="#{empleado.contra}"/>
 </h:column>
 <h:column>
 <f:facet name="header">
 <h:outputLabel value="Id Recurso"/>
 </f:facet>
     <h:outputText value="#{empleado.idRecurso.id}"/>
 </h:column>
 <h:column>
 <f:facet name="header">
 <h:outputLabel value="Operaciones"/>
 </f:facet>
 <h:commandButton value="Eliminar" styleClass="btn btn-danger"
        action="#{empleadoBean.eliminarEmpleado}"
 onclick="return confirmarEliminacion();">
     <f:param name="id" value="#{empleado.id}"/>
 </h:commandButton>
 </h:column>
 </h:dataTable>
 </h:form>
 </div>
 </div>
<h:outputScript>
 <c:if test = "#{not empty flash.exito}" >
 alertify.success('#{flash.exito}');
 </c:if>
    function confirmarEliminacion(){
 return confirm("¿Está seguro que desea eliminar este empleado?");
}
 </h:outputScript>
 </h:body>
</html>

