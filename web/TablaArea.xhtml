<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
 xmlns:h="http://xmlns.jcp.org/jsf/html"
 xmlns:f="http://xmlns.jcp.org/jsf/core"
 xmlns:c="http://java.sun.com/jsp/jstl/core"
 xmlns:p="http://primefaces.org/ui">
 <h:head>
 <title>Registro de usuarios</title>
 <h:outputStylesheet name="css/bootstrap.min.css" />
 <h:outputStylesheet name="css/alertify.core.css" />
 <h:outputStylesheet name="css/alertify.default.css" />
 <h:outputScript name="js/alertify.js"/>
 
 </h:head>
 <h:body>
 <div class="container">
 <div class="row">
 <div class="col-md-12">
 <h2>Registro de usuarios</h2>
 <h:form id="miFormulario">
 <h:panelGroup layout="block" styleClass="alert alert-danger"
 rendered="#{not empty facesContext.messageList}">
 <h:messages />
 </h:panelGroup>
 <h:panelGrid columns="4" styleClass="table">
 <h:outputLabel for="Id" value="Id:"/>
 <h:inputText id="id" styleClass="form-control"
 value="#{areaBean.area.id}"
required="true"
requiredMessage="Debes ingresar el id"
validatorMessage="Id no valido">
 <f:validateRegex pattern="[A-Z]{2}[0-9]{4}"/>
 </h:inputText>
 <h:outputLabel for="Nombre" value="Nombre:"/>
 <h:inputText id="nombre" styleClass="form-control"
 value="#{areaBean.area.nombre}"
 required="true"
requiredMessage="Debes ingresar el nombre"/>
 <h:outputLabel for="IdJefe" value="IdJefeAsignado:"/>
 <p:selectOneMenu id="opciones"  value="#{areaBean}">
     <f:selectItems value="#{areaBean.listarJefeAsignado}" var="listar"  itemLabel="#{listar.id}"/> 
   </p:selectOneMenu>
 </h:panelGrid>
 <h:commandButton value="Guardar" styleClass="btn btn-success"
 action="#{areaBean.guardarArea()}" style="margin-right:10px"/>
 <h:commandButton type="reset" value="Limpiar" styleClass="btn btn-danger"/>
 </h:form>
 </div>
 </div>
 <div class="row">
 <h:form>
     <h:dataTable styleClass="table"  value="#{areaBean.listaArea}"
       var="area"  rendered="#{areaBean.listaArea.size()>0}">
 <h:column>
 <f:facet name="header">
 <h:outputLabel value="Id"/>
 </f:facet>
     <h:outputText value="#{area.id}"/>
 </h:column>
 <h:column>
 <f:facet name="header">
 <h:outputLabel value="Nombre"/>
 </f:facet>
     <h:outputText value="#{area.nombre}"/>
 </h:column>
 <h:column>
 <f:facet name="header">
 <h:outputLabel value="Id jefe asignado"/>
 </f:facet>
     <h:outputText value="#{area.idJefeAsignado.id}"/>
 </h:column>
 <h:column>
 <f:facet name="header">
 <h:outputLabel value="Operaciones"/>
 </f:facet>
 <h:commandButton value="Eliminar" styleClass="btn btn-danger"
         action="#{areaBean.eliminarArea}"
 onclick="return confirmarEliminacion();">
     <f:param name="id" value="#{area.id}"/>
 </h:commandButton>
 </h:column>
 </h:dataTable>
 </h:form>
 </div>
 </div>
<h:outputScript>
 <c:if test = "#{not empty flash.exito}" >
 alertify.success('#{flash.exito}');
 </c:if>
    function confirmarEliminacion(){
 return confirm("¿Está seguro que desea eliminar este usuario?");
}
 </h:outputScript>
 </h:body>
</html>

