<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        
        <h:outputStylesheet library="css" name="primeflex.min.css"/>
        <h:outputStylesheet library="css" name="style.css"/>
        
        <title>Memo de asignación</title>
        
    </h:head>
    
    <h:body class="firstBody">

        <script type="text/javascript">
            PrimeFaces.locales['es'] = {
                closeText: 'Cerrar',
                prevText: 'Anterior',
                nextText: 'Siguiente',
                monthNames: ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'],
                monthNamesShort: ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun', 'Jul', 'Ago', 'Sep', 'Oct', 'Nov', 'Dic'],
                dayNames: ['Domingo', 'Lunes', 'Martes', 'Miércoles', 'Jueves', 'Viernes', 'Sábado'],
                dayNamesShort: ['Dom', 'Lun', 'Mar', 'Mie', 'Jue', 'Vie', 'Sab'],
                dayNamesMin: ['D', 'L', 'M', 'M', 'J', 'V', 'S'],
                weekHeader: 'Semana',
                firstDay: 1,
                isRTL: false,
                showMonthAfterYear: false,
                yearSuffix: '',
                timeOnlyTitle: 'Sólo hora',
                timeText: 'Tiempo',
                hourText: 'Hora',
                minuteText: 'Minuto',
                secondText: 'Segundo',
                millisecondText: 'Milisegundo',
                currentText: 'Fecha actual',
                ampm: false,
                month: 'Mes',
                week: 'Semana',
                day: 'Día',
                allDayText: 'Todo el día',
                today: 'Hoy',
                clear: 'Claro'
            };
            
        </script>

        <script type="text/javascript">
            //<![CDATA[
            function dateTemplateFunc(date) {
                return '<span style="background-color:' + ((date.day < 21 && date.day > 10) ? '#81C784' : 'inherit') + ';border-radius:50%;width: 2.5rem;height: 2.5rem;line-height: 2.5rem;display: flex;align-items: center;justify-content: center;">' + date.day + '</span>';
            }

            //]]>
        </script>

        <style type="text/css">
            .value {
                font-weight: bold;
            }
        </style>

        <menu class="menu">

            <div class="card">

                <h:form>

                    <p:menubar style="background-color: #299795; border-radius: 0%; border: none;">

                        <p:menuitem url="${request.contextPath}/faces/adminIT/indexAdminIT.xhtml">

                            <h:outputLabel value="FUSALMO IT PORTAL" style="color: #DEE2E6; font-weight: bold;"/>

                        </p:menuitem>

                        <f:facet name="options">
                            <p:button 
                                class="buttonLogout"
                                value="Salir" 
                                icon="pi pi-fw pi-sign-out" 
                                styleClass="ui-button-info" 
                                href="${request.contextPath}/faces/logout.jsp"
                                style="color: #DEE2E6; font-weight: bold;"
                                />
                        </f:facet>

                    </p:menubar>

                </h:form>

            </div>

        </menu>

        <div class="welcome">
            <div class="p-grid">
                <div class="title p-col-8" style="width: 70%; margin: auto">

                    <h1 class="titleH1">
                        Creación memo de asignación
                    </h1>

                </div>
                <div class="image p-col-4" style="width: 20%; margin: auto">

                    <h:graphicImage library="img" name="LogoFusalmo.png" class="styleImage"/>

                </div>
            </div>
            
            <p:divider class=""/>

        </div>
        
        <p:button 
            styleClass="ui-button-outlined ui-button-info"
            value="Regresar" 
            icon="pi pi-chevron-left"
            style="width: 50%; margin-left: 25%; margin-bottom: 20px; margin-top: 10px; color: #17A2B8"
            href="${request.contextPath}/faces/adminIT/memos/crear/index-crear.xhtml"
            />
        
        <h:form style="width: 80%; margin: auto;">
            
            <div class="card">

                <p:tabView dynamic="true" cache="true">

                    <!--Inserción de datos-->
                    
                    <p:tab title="Creación">
                        
                        <h:panelGrid columns="1" cellpadding="7" styleClass="p-mb-1">

                            <p:outputLabel for="para" value="Para:"/>
                            <p:selectOneMenu id="para" value="#{memos_Bean.areaSeleccionada}">
                                <f:selectItem itemLabel="Seleccione una opción" itemValue=""/>
                                <f:selectItems
                                    value="#{memos_Bean.listarAreas}" 
                                    var="list" 
                                    itemLabel="#{list.idJefeAsignado.nombres} #{list.idJefeAsignado.apellidos} (#{list.nombre})" 
                                    itemValue="#{list.id}"/>
                                <p:ajax event="change" listener="#{memos_Bean.onChanged()}" update="mostrarNombre empleados"/>
                                <!--<p:ajax event="change" listener="#{memos_Bean.obtenerArea()}" update="mostrarNombre"/>-->
                                <!--<p:ajax event="change" listener="#{memos_Bean.generarLista(memos_Bean.areaSeleccionada)}" update="empleados"/>-->
                            </p:selectOneMenu>
                            <p:message for="para" id="msgPara"/>

                            <p:outputLabel for="asunto" value="Asunto:"/>
                            <p:inputText 
                                id="asunto" 
                                value="#{memos_Bean.memos.asunto}" 
                                required="true"
                                label="Asunto"
                                requiredMessage="Debes ingresar un asunto"
                                validatorMessage="El asunto debe contener más de dos caracteres"
                                placeholder="Entrega de equipo"
                                size="50"
                                >
                                <f:validateLength minimum="2"/>
                                <p:ajax update="mostrarAsunto" event="blur"/>
                            </p:inputText>
                            
                            <p:message for="asunto" id="msgAsunto"/>

                            <p:outputLabel for="basic" value="Fecha de entrega:"/>
                            <p:datePicker id="basic" value="#{memos_Bean.date}">
                                <p:ajax update="mostrarFecha" listener="#{memos_Bean.convertirFecha()}" event="focus"/>
                            </p:datePicker>
                            <p:growl id="msgs" showDetail="true" skipDetailIfEqualsSummary="true"/>
                            
                            <p:outputLabel for="empleados" value="Usuario a entregar recursos:"/>
                            <p:selectOneMenu
                                id="empleados"
                                value="#{memos_Bean.empleadoSeleccionado}">
                                <f:selectItem itemLabel="Selecciona un usuario" itemValue=""/>
                                <f:selectItems
                                    value="#{memos_Bean.listaEMPArea}"
                                    var="listEmpleados"
                                    itemLabel="#{listEmpleados.nombres} #{listEmpleados.apellidos} (#{listEmpleados.cargo})"
                                    itemValue="#{listEmpleados.id}"
                                    />
                                <p:ajax event="change" listener="#{memos_Bean.prueba()}"/>
                                <!--<p:ajax event="change" update="@this" />-->
                                <!--<p:ajax update="mostrarEmpleado" event="change"/>-->
                            </p:selectOneMenu>
                            
                        </h:panelGrid>
                        
                        <p:commandButton
                            value="Guardar"
                            update="@form"
                            styleClass="ui-button-outlined ui-button-success" 
                            style="margin-bottom: 35px; margin-top: 35px; margin-right: 20px; min-width: 25%;"
                            action="#{memos_Bean.agregarMemo()}"
                            >

                            <f:param name="tipoRecurso" value="4"/>

                        </p:commandButton>

                        <p:button 
                            value="Cancelar" 
                            styleClass="ui-button-outlined ui-button-danger" 
                            style="margin-bottom: 35px; margin-top: 35px; min-width: 25%;" 
                            href="${request.contextPath}/faces/adminIT/recursos/agregar/seleccionDeRecurso.xhtml"
                            />
                        
                    </p:tab>

                    <!--Vista previa de la inserción de datos para PDF-->
                    
                    <p:tab title="Vista previa">
                        
                        <h4>MEMORÁNDUM</h4>
                        
                        <h:outputText value="Para: "/> <h:outputText id="mostrarNombre" value="#{memos_Bean.memos.para}"/>
                        
                        <br/>
                        <br/>
                        <br/>
                        
                        <h:outputText value="De: "/> #{nombre}
                        
                        <br/>
                        <br/>
                        <br/>
                        
                        <h:outputText value="Asunto: "/> <h:outputText id="mostrarAsunto" value="#{memos_Bean.memos.asunto}"/>
                        
                        <br/>
                        <br/>
                        <br/>
                        
                        <h:outputText value="Fecha: "/> <h:outputText value="#{memos_Bean.dateSelected}" id="mostrarFecha"/>
                        
                        <br/>
                        <br/>
                        
                        <p:divider class=""/>
                        
                        <p>
                            Por este medio, se efectúa la asignación de equipo
                            informático en calidad de <b>ASIGNACIÓN</b> para el
                            usuario <b><h:outputText id="mostrarEmpleado" value="#{memos_Bean.empleadoSeleccionado}"/></b>
                        </p>
                        
                        <p>
                            El recurso a entregar es el siguiente:
                        </p>

                        <div class="card">
                            
                            <p:dataTable var="product" value="#{dtBasicView.products}" showGridlines="true">
                                <p:column headerText="Tipo de equipo">
                                    <h:outputText value="#{product.code}" />
                                </p:column>

                                <p:column headerText="Marca">
                                    <h:outputText value="#{product.name}" />
                                </p:column>

                                <p:column headerText="Modelo">
                                    <h:outputText value="#{product.category}" />
                                </p:column>

                                <p:column headerText="Número de serie / Etiqueta de servicio">
                                    <h:outputText value="#{product.quantity}" />
                                </p:column>
                            </p:dataTable>
                        </div>

                    </p:tab>

                </p:tabView>

            </div>
           
        </h:form>

    </h:body>
    
</html>

